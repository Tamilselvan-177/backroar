{% extends 'base.twig' %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<section class="py-10">
    <div class="container mx-auto px-4">

        <h1 class="text-2xl md:text-4xl font-bold text-center mb-8 text-[var(--brand-heading)] uppercase">
            Shop by Categories
        </h1>

        {% if categories is not empty %}
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">

                {% for category in categories %}
                    <a href="{{ app_url }}/category/{{ category.slug }}"
                       class="overflow-hidden bg-white border border-[var(--card-border)] shadow hover-scale rounded-lg transition-all duration-300">

                        <div class="aspect-square bg-gradient-to-b from-blue-100 to-white flex items-center justify-center overflow-hidden">
                            
                            {% if category.image_path %}
                                <img src="{{ app_url }}/{{ category.image_path }}"
                                     alt="{{ category.name }}"
                                     class="w-full h-full object-cover"
                                     loading="lazy"
                                     decoding="async"
                                     onerror="this.src='{{ app_url }}/images/placeholder.png'">
                            {% else %}
                                <img src="{{ app_url }}/images/placeholder.png"
                                     class="w-full h-full object-cover opacity-80"
                                     alt="No Image">
                            {% endif %}

                        </div>

                        <div class="bg-black text-white text-center font-bold uppercase py-3">
                            {{ category.name }}

                            {% if category.product_count %}
                                <span class="text-xs font-normal block text-gray-300">
                                    ({{ category.product_count }} items)
                                </span>
                            {% endif %}
                        </div>

                    </a>
                {% endfor %}

            </div>
        {% else %}
            <div class="text-center py-12">
                <p class="text-gray-600 text-lg">No categories found.</p>
            </div>
        {% endif %}

    </div>
</section>
{% endblock %}
